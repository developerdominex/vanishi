<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Register — Hybrid Chat</title>
<link rel="icon" type="image/png" href="hybrid.png">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<script src="https://accounts.google.com/gsi/client" async defer></script>

<style>
:root {
  --accent:#6366f1;
  --accent-hover:#4f46e5;
  --bg:#f3f4f6;
  --card:#ffffff;
  --text:#111827;
  --muted:#6b7280;
  --shadow:rgba(0,0,0,0.1);
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  font-family: "Inter", sans-serif;
}

body {
  height: 100vh;
  background: var(--bg);
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

/* Main Card */
.reg-card {
  background: var(--card);
  padding: 32px 28px;
  border-radius: 18px;
  width: 100%;
  max-width: 420px;
  text-align: center;
  box-shadow: 0 12px 36px var(--shadow);
  position: relative;
  z-index: 2;
}

.reg-card h2 {
  font-size: 24px;
  font-weight: 700;
  color: var(--text);
  margin-bottom: 18px;
}

p.sub {
  color: var(--muted);
  font-size: 14px;
  margin-bottom: 24px;
}

footer {
  margin-top: 24px;
  font-size: 12px;
  color: var(--muted);
}

/* Mini File Explorer Animation */
#miniExplorer {
  position: absolute;
  top: -160px;
  left: 50%;
  transform: translateX(-50%);
  width: 320px;
  background: var(--card);
  border-radius: 14px;
  box-shadow: 0 8px 25px var(--shadow);
  overflow: hidden;
  opacity: 0;
  animation: explorerDrop 1.2s ease forwards;
}

@keyframes explorerDrop {
  from {opacity: 0; transform: translate(-50%, -40px);}
  to {opacity: 1; transform: translate(-50%, 0);}
}

#miniExplorer .header {
  background: var(--accent);
  color: #fff;
  padding: 10px 14px;
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
}

#miniExplorer .content {
  background: #f9fafb;
  padding: 10px;
  height: 110px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.file-row {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: var(--text);
  margin-bottom: 6px;
  opacity: 0;
  transform: translateY(10px);
  animation: slideUp 0.4s forwards;
}

.file-row i {
  color: var(--accent);
}

@keyframes slideUp {
  to {opacity: 1; transform: translateY(0);}
}

/* User Info */
#userInfo {
  display: none;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  margin-top: 10px;
}

#userInfo img {
  width: 72px;
  height: 72px;
  border-radius: 50%;
  box-shadow: 0 4px 12px var(--shadow);
}

#userInfo h3 {
  font-size: 18px;
  color: var(--text);
  font-weight: 600;
}

/* Floating Bubbles */
.bubble {
  position: absolute;
  border-radius: 50%;
  background: var(--accent);
  opacity: 0.15;
  animation: float 6s ease-in-out infinite;
}

.bubble:nth-child(1) {
  width: 80px; height: 80px;
  top: 15%; left: 10%;
  animation-delay: 0s;
}
.bubble:nth-child(2) {
  width: 120px; height: 120px;
  bottom: 10%; right: 15%;
  animation-delay: 2s;
}
.bubble:nth-child(3) {
  width: 60px; height: 60px;
  bottom: 20%; left: 25%;
  animation-delay: 1s;
}

@keyframes float {
  0%, 100% {transform: translateY(0);}
  50% {transform: translateY(-20px);}
}

/* Drive Loading Overlay */
#loadingOverlay {
  position: fixed;
  inset: 0;
  background: rgba(255,255,255,0.9);
  display: none;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  z-index: 100;
}

#loadingOverlay i {
  font-size: 48px;
  color: var(--accent);
  animation: float 2s infinite;
}

#loadingOverlay p {
  margin-top: 12px;
  font-size: 14px;
  color: var(--muted);
}
</style>
</head>
<body>

<!-- Floating Background -->
<div class="bubble"></div>
<div class="bubble"></div>
<div class="bubble"></div>

<!-- Mini File Explorer -->
<div id="miniExplorer">
  <div class="header"><i class="fas fa-folder-open"></i> My Drive</div>
  <div class="content" id="explorerContent"></div>
</div>

<!-- Main Card -->
<div class="reg-card" id="card">
  <h2>Welcome to Hybrid Chat</h2>
  <p class="sub">Sign in with Google to continue</p>

  <div id="buttonDiv"></div>

  <div id="userInfo">
    <img id="userPic" alt="Profile">
    <h3 id="userName"></h3>
  </div>

  <footer>Hybrid Chat © 2025 Dominex Macedon</footer>
</div>

<!-- Loading Overlay -->
<div id="loadingOverlay">
  <i class="fab fa-google-drive"></i>
  <p>Preparing your chat space...</p>
</div>

<script>
// Mini explorer animation
const explorerContent=document.getElementById('explorerContent');
const exampleFiles=[
  {icon:"fa-folder",name:"Projects"},
  {icon:"fa-folder",name:"Hybrid Chat"},
  {icon:"fa-file-code",name:"main.js"},
  {icon:"fa-file-image",name:"avatar.png"},
  {icon:"fa-file-lines",name:"readme.txt"}
];
let i=0;
function addNextFile(){
  if(i>=exampleFiles.length)return;
  const f=exampleFiles[i];
  const el=document.createElement('div');
  el.className='file-row';
  el.style.animationDelay=`${i*0.3}s`;
  el.innerHTML=`<i class="fas ${f.icon}"></i><span>${f.name}</span>`;
  explorerContent.appendChild(el);
  i++;
  setTimeout(addNextFile,350);
}
addNextFile();

// Google Sign-In setup
window.onload = function() {
  google.accounts.id.initialize({
    client_id: "549003131640-o9umsg7tu0uisopde76mlf3lg5krt5g7.apps.googleusercontent.com",
    callback: handleCredentialResponse
  });
  google.accounts.id.renderButton(
    document.getElementById("buttonDiv"),
    { theme: "filled_blue", size: "large", text: "signin_with", shape: "rectangular" }
  );
};

// Handle Sign-In Response
function handleCredentialResponse(response) {
  const data = JSON.parse(atob(response.credential.split('.')[1]));
  const userInfo = document.getElementById('userInfo');
  const pic = document.getElementById('userPic');
  const name = document.getElementById('userName');

  pic.src = data.picture;
  name.textContent = data.name;
  userInfo.style.display = "flex";

  // Save locally
  const profileData = {
    uuid: crypto.randomUUID(),
    name: data.name,
    email: data.email,
    avatar: data.picture,
    createdAt: new Date().toISOString()
  };
  localStorage.setItem('rc_profile_v2', JSON.stringify(profileData));

  // Show loading overlay
  const overlay = document.getElementById('loadingOverlay');
  overlay.style.display = 'flex';

  // Redirect after delay
  setTimeout(() => {
    window.location.href = 'index.html';
  }, 1800);
}

// Disable right-click and DevTools
document.addEventListener('contextmenu', e => e.preventDefault());
document.addEventListener('keydown', e => {
  if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && ['I','J','C'].includes(e.key.toUpperCase())) || (e.ctrlKey && ['U','S','P'].includes(e.key.toUpperCase()))) {
    e.preventDefault();
    e.stopPropagation();
  }
});
</script>
</body>
</html>
