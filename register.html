<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Register — Hybrid Chat</title>
<link rel="icon" type="image/png" href="hybrid.png">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
:root {
  --accent:#6366f1;
  --accent-hover:#4f46e5;
  --bg:#f9fafb;
  --card:#ffffff;
  --text:#111827;
  --muted:#6b7280;
  --shadow:rgba(0,0,0,0.08);
}

*{box-sizing:border-box;margin:0;padding:0;font-family:Inter,sans-serif;}
body{height:100vh;background:var(--bg);display:flex;align-items:center;justify-content:center;}
.reg-card{
  background:var(--card);
  padding:32px 28px;
  border-radius:16px;
  width:100%;
  max-width:400px;
  box-shadow:0 8px 24px var(--shadow);
  text-align:center;
}
.reg-card h2{
  font-size:24px;
  font-weight:700;
  margin-bottom:24px;
  color:var(--text);
}
.input-field{display:flex;flex-direction:column;align-items:flex-start;margin-bottom:20px;text-align:left;}
.input-field label{font-size:14px;color:var(--muted);margin-bottom:6px;}
.input-field input[type="text"]{
  width:100%;
  padding:12px 16px;
  font-size:15px;
  border:1px solid #e5e7eb;
  border-radius:8px;
  outline:none;
  transition:all 0.2s ease;
}
.input-field input[type="text"]:focus{
  border-color:var(--accent);
  box-shadow:0 4px 12px var(--shadow);
}

.upload-box{
  width:100%;
  padding:20px;
  border:2px dashed #e5e7eb;
  border-radius:12px;
  cursor:pointer;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  transition:all 0.2s ease;
  background:#f3f4f6;
}
.upload-box:hover{border-color:var(--accent);background:#eef2ff;}
.upload-box img{width:80px;height:80px;border-radius:50%;object-fit:cover;}

.save-btn{
  width:100%;
  padding:14px;
  background:var(--accent);
  color:#fff;
  font-size:16px;
  font-weight:600;
  border:none;
  border-radius:12px;
  cursor:pointer;
  transition:all 0.2s ease;
}
.save-btn:hover{background:var(--accent-hover);}

footer{
  margin-top:20px;
  font-size:12px;
  color:var(--muted);
}

.alert-overlay{
  position:fixed;
  top:0;left:0;right:0;bottom:0;
  background:rgba(0,0,0,0.5);
  display:flex;
  align-items:center;
  justify-content:center;
  opacity:0;
  pointer-events:none;
  transition:opacity 0.3s ease;
}
.alert-overlay.show{opacity:1;pointer-events:auto;}
.alert-box{
  background:var(--card);
  padding:24px 28px;
  border-radius:16px;
  text-align:center;
  box-shadow:0 8px 24px var(--shadow);
}
.alert-box i{
  font-size:28px;
  color:#f87171;
  margin-bottom:12px;
}
.alert-box p{margin-bottom:16px;color:var(--text);}
.alert-btn{
  padding:10px 20px;
  background:var(--accent);
  color:#fff;
  border:none;
  border-radius:12px;
  cursor:pointer;
}
.alert-btn:hover{background:var(--accent-hover);}
</style>
</head>
<body>

<div class="reg-card">
  <h2>Create Your Profile</h2>

  <div class="input-field">
    <label>Name</label>
    <input type="text" id="nameInput" placeholder="Enter your name">
  </div>

  <div class="input-field">
    <label>Profile Image</label>
    <div class="upload-box" id="uploadBox">
      <i class="fas fa-user-circle" style="font-size:54px;color:var(--muted)"></i>
      <p style="font-size:0.9em;color:var(--muted);margin-top:6px;">Click to upload</p>
      <input type="file" id="fileInput" accept="image/*" style="display:none;">
    </div>
  </div>

  <button class="save-btn" id="saveProfile">Save & Continue</button>
  <footer>Realtime Chat © 2025 Dominex Macedon</footer>
</div>

<div class="alert-overlay" id="alertOverlay">
  <div class="alert-box">
    <i class="fas fa-exclamation-triangle"></i>
    <p id="alertMessage">Please fill all fields.</p>
    <button class="alert-btn" id="alertClose">OK</button>
  </div>
</div>

<script>
const nameInput = document.getElementById('nameInput')
const uploadBox = document.getElementById('uploadBox')
const fileInput = document.getElementById('fileInput')
const alertOverlay = document.getElementById('alertOverlay')
const alertMsg = document.getElementById('alertMessage')
const alertClose = document.getElementById('alertClose')
let avatarData = ''

uploadBox.addEventListener('click', ()=>fileInput.click())
fileInput.addEventListener('change', e=>{
  const file = e.target.files[0]
  if(!file) return
  const reader = new FileReader()
  reader.onload = ()=> {
    avatarData = reader.result
    uploadBox.innerHTML = `<img src="${avatarData}" alt="avatar">`
  }
  reader.readAsDataURL(file)
})

function showAlert(message) {
  alertMsg.textContent = message
  alertOverlay.classList.add('show')
}
alertClose.addEventListener('click', ()=> {
  alertOverlay.classList.remove('show')
})

document.getElementById('saveProfile').addEventListener('click', ()=>{
  const name = nameInput.value.trim()
  if(!name || !avatarData) { 
    showAlert("Please enter your name and upload a profile image."); 
    return; 
  }
  const profile = {uuid:crypto.randomUUID(), name, avatar:avatarData}
  localStorage.setItem('rc_profile_v2', JSON.stringify(profile))
  window.location.href = 'index.html'
})

document.addEventListener('contextmenu', e => e.preventDefault())
document.addEventListener('keydown', e => {
  if (
    e.key === 'F12' ||
    (e.ctrlKey && e.shiftKey && ['I','J','C'].includes(e.key.toUpperCase())) ||
    (e.ctrlKey && ['U','S','P'].includes(e.key.toUpperCase()))
  ) {
    e.preventDefault()
    e.stopPropagation()
  }
})
</script>
</body>
</html>
